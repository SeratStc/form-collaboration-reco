<!DOCTYPE html>
<html>
<head>
    <title>reco - real time collaboration</title>
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">
    <style type="text/css">
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
    </style>
</head>
<body>

<div id="config" class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner" data-bind="visible: isConfigVisible">
        <div class="container">

            <div class="nav-collapse collapse navbar-form form-inline navbar-text" data-bind="visible: isConfigVisible">
                <label for="merge">merge strategy</label>
                <select id="merge" class="span2"
                        data-bind="options: mergeValues, value: merge">
                </select>
                <label for="history">history strategy</label>
                <select id="history" class="span2"
                        data-bind="options: historyValues, value: history">
                </select>


                <label for="notification">notify strategy</label>
                <select id="notification" class="span2"
                        data-bind="options: notificationValues, value: notification">
                </select>
                <label for="user">user</label>
                <input id="user" class="span2" type="text" placeholder="user name" data-bind="value: user">
            </div>
            <!--/.nav-collapse -->
        </div>
    </div>
    <a href="#" data-bind="click: toggleShowConfig.bind($root), visible: !isConfigVisible()">show config</a>
    <a href="#" data-bind="click: toggleShowConfig.bind($root), visible: isConfigVisible">hide config</a>
</div>

<div id="mainView" class="row">
    <div id="statusbar" class="navbar" data-bind="visible: isNotificationBarVisible">
        <div class="navbar-inner">
            <div class="container">
                <p class="navbar-text">
                    <span data-bind="text: notification"></span>
                </p>
            </div>
        </div>
    </div>

    <div class="span5 offset1">
        <fieldset>
            <legend>Plain</legend>

            <label for="inputOne">Input one</label>

            <input id="inputOne" type="text"
                   data-bind="value: inputOne, valueUpdate: 'afterkeydown', disable: inputOneDisabled,
                   hasFocus: inputOneSelected, visible: !isMultiMergeVisible()">

            <div id="inputOneEditable" class="editable"
                 data-bind="visible: isMultiMergeVisible, attr: {contentEditable: isMultiMergeVisible},
                 contentEditable: {text: inputOne, html: inputOneEditable}">

            </div>

            <span class="help-inline" data-bind="visible: isHistoryByFieldVisible">
                <a href="#" data-bind="click: showHistoryByField.bind($data, 'inputOne')">
                    <i class="icon-time"></i>
                </a>
            </span>


            <label for="inputTwo">Input two</label>

            <input id="inputTwo" type="text"
                   data-bind="value: inputTwo, valueUpdate: 'afterkeydown', disable: inputTwoDisabled,
                   hasFocus: inputTwoSelected, visible: !isMultiMergeVisible()">

            <div id="inputTwoEditable" class="editable"
                 data-bind="visible: isMultiMergeVisible, attr: {contentEditable: isMultiMergeVisible},
                 contentEditable: {text: inputTwo, html: inputTwoEditable}">

            </div>

            <span class="help-inline" data-bind="visible: isHistoryByFieldVisible">
                <a href="#" data-bind="click: showHistoryByField.bind($data, 'inputTwo')">
                    <i class="icon-time"></i>
                </a>
            </span>
            <span class="help-block" data-bind="visible: isMultiMergeVisible">

            </span>

            <label for="inputThree">Input three</label>

            <input id="inputThree" type="text"
                   data-bind="value: inputThree, valueUpdate: 'afterkeydown', disable: inputThreeDisabled,
                   hasFocus: inputThreeSelected, visible: !isMultiMergeVisible()">

            <div id="inputThreeEditable" class="editable"
                 data-bind="visible: isMultiMergeVisible, attr: {contentEditable: isMultiMergeVisible},
                 contentEditable: {text: inputThree, html: inputThreeEditable}">

            </div>

            <span class="help-inline" data-bind="visible: isHistoryByFieldVisible">
                <a href="#" data-bind="click: showHistoryByField.bind($data, 'inputThree')">
                    <i class="icon-time"></i>
                </a>
            </span>
            <span class="help-block" data-bind="visible: isMultiMergeVisible">

            </span>

            <label for="inputFour">Input four</label>

            <input id="inputFour" type="text"
                   data-bind="value: inputFour, valueUpdate: 'afterkeydown', disable: inputFourDisabled,
                   hasFocus: inputFourSelected, visible: !isMultiMergeVisible()">

            <div id="inputFourEditable" class="editable"
                 data-bind="visible: isMultiMergeVisible, attr: {contentEditable: isMultiMergeVisible},
                 contentEditable: {text: inputFour, html: inputFourEditable}">

            </div>

            <span class="help-inline" data-bind="visible: isHistoryByFieldVisible">
                <a href="#" data-bind="click: showHistoryByField.bind($data, 'inputFour')">
                    <i class="icon-time"></i>
                </a>
            </span>


            <label for="inputFive">Input five</label>

            <input id="inputFive" type="text"
                   data-bind="value: inputFive, valueUpdate: 'afterkeydown', disable: inputFiveDisabled,
                   hasFocus: inputFiveSelected, visible: !isMultiMergeVisible()">

            <div id="inputFiveEditable" class="editable"
                 data-bind="visible: isMultiMergeVisible, attr: {contentEditable: isMultiMergeVisible},
                 contentEditable: {text: inputFive, html: inputFiveEditable}">

            </div>

            <span class="help-inline" data-bind="visible: isHistoryByFieldVisible">
                <a href="#" data-bind="click: showHistoryByField.bind($data, 'inputFive')">
                    <i class="icon-time"></i>
                </a>
            </span>
            <span class="help-block" data-bind="visible: isMultiMergeVisible">

            </span>

            <label for="inputSix">Input six</label>

            <input id="inputSix" type="text"
                   data-bind="value: inputSix, valueUpdate: 'afterkeydown', disable: inputSixDisabled,
                   hasFocus: inputSixSelected, visible: !isMultiMergeVisible()">

            <div id="inputSixEditable" class="editable"
                 data-bind="visible: isMultiMergeVisible, attr: {contentEditable: isMultiMergeVisible},
                 contentEditable: {text: inputSix, html: inputSixEditable}">

            </div>

            <span class="help-inline" data-bind="visible: isHistoryByFieldVisible">
                <a href="#" data-bind="click: showHistoryByField.bind($data, 'inputSix')">
                    <i class="icon-time"></i>
                </a>
            </span>
            <span class="help-block" data-bind="visible: isMultiMergeVisible">

            </span>

            <label for="inputSeven">Input seven</label>

            <input id="inputSeven" type="text"
                   data-bind="value: inputSeven, valueUpdate: 'afterkeydown', disable: inputSevenDisabled,
                   hasFocus: inputSevenSelected, visible: !isMultiMergeVisible()">

            <div id="inputSevenEditable" class="editable"
                 data-bind="visible: isMultiMergeVisible, attr: {contentEditable: isMultiMergeVisible},
                 contentEditable: {text: inputSeven, html: inputSevenEditable}">

            </div>

            <span class="help-inline" data-bind="visible: isHistoryByFieldVisible">
                <a href="#" data-bind="click: showHistoryByField.bind($data, 'inputSeven')">
                    <i class="icon-time"></i>
                </a>
            </span>


            <label for="inputEight">Input eight</label>

            <input id="inputEight" type="text"
                   data-bind="value: inputEight, valueUpdate: 'afterkeydown', disable: inputEightDisabled,
                   hasFocus: inputEightSelected, visible: !isMultiMergeVisible()">

            <div id="inputEightEditable" class="editable"
                 data-bind="visible: isMultiMergeVisible, attr: {contentEditable: isMultiMergeVisible},
                 contentEditable: {text: inputEight, html: inputEightEditable}">

            </div>

            <span class="help-inline" data-bind="visible: isHistoryByFieldVisible">
                <a href="#" data-bind="click: showHistoryByField.bind($data, 'inputEight')">
                    <i class="icon-time"></i>
                </a>
            </span>
            <span class="help-block" data-bind="visible: isMultiMergeVisible">

            </span>

            <label for="inputNine">Input nine</label>

            <input id="inputNine" type="text"
                   data-bind="value: inputNine, valueUpdate: 'afterkeydown', disable: inputNineDisabled,
                   hasFocus: inputNineSelected, visible: !isMultiMergeVisible()">

            <div id="inputNineEditable" class="editable"
                 data-bind="visible: isMultiMergeVisible, attr: {contentEditable: isMultiMergeVisible},
                 contentEditable: {text: inputNine, html: inputNineEditable}">

            </div>

            <span class="help-inline" data-bind="visible: isHistoryByFieldVisible">
                <a href="#" data-bind="click: showHistoryByField.bind($data, 'inputNine')">
                    <i class="icon-time"></i>
                </a>
            </span>
            <span class="help-block" data-bind="visible: isMultiMergeVisible">

            </span>

        </fieldset>
    </div>

    <div data-bind="visible: isObjectNotificationVisible">
        <div class="tooltip in" data-bind="style: {top: toolTipTop, left: toolTipLeft, display: 'block'},
            css: {right: toolTipArrow() == 'right', bottom: toolTipArrow() == 'bottom', top: toolTipArrow() == 'top'}">
            <div class="tooltip-arrow"></div>
            <div class="tooltip-inner" data-bind="text: notification">
            </div>
        </div>
    </div>

    <ul data-bind="visible: isHistoryByUserVisible, foreach: users">
        <li>
            <a href="#" data-bind="click: $parent.showHistoryByUser.bind($parent, $data)">
                <i class="icon-user"></i> <span data-bind="text: $data"></span>
            </a>
        </li>
    </ul>

    <div class="span3" data-bind="visible: isHistoryBoxVisible">
        <div class="popover right" style="display: block" data-bind="style: {top: historyTop, left: historyLeft},
            css: {right: isHistoryByFieldVisible}">
            <div class="arrow"></div>
            <div class="popover-inner">
                <h3 class="popover-title">History by
                    <strong data-bind="visible: isHistoryByFieldVisible, text: fieldForHistory"></strong>
                    <strong data-bind="visible: isHistoryByUserVisible, text: userForHistory"></strong>
                    <strong data-bind="visible: isHistoryByTimeVisible">Time</strong>
                </h3>

                <div class="popover-content " data-bind="foreach: history">
                    <span data-bind="visible: !$parent.isHistoryByFieldVisible()">
                        <strong data-bind="text: field"></strong>:
                    </span>
                    <code data-bind="text: value"></code>
                    <span data-bind="visible: !$parent.isHistoryByUserVisible()">
                        <small>by</small> <em data-bind="text: user"></em>
                    </span>
                    <br>
                </div>
            </div>
        </div>
    </div>

    <div class="span3 offset10" style="position: absolute; bottom: 0"
         data-bind="visible: isBubbleNotificationVisible, foreach: notifications">
        <div class="alert alert-info">
            <span data-bind="text: user"></span>
            is typing in
            <span data-bind="text: field"></span>
        </div>
    </div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script data-main="js/main.js" src="js/lib/require.js"></script>

</body>
</html>